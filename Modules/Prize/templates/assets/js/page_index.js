jQuery(function(i){var a='<div class="space-4"></div>    <div class="row">        <div class="form-group">            <label class="col-xs-4" style="text-align: right;">奖品名称：</label>            <div>                <input type="text"  name="prizename"  class="col-xs-5" value="" />            </div>        </div>    </div>    <div class="space-4"></div>    \x3c!--<div class="row">        <div class="form-group">            <label class="col-xs-4" style="text-align: right;">奖品类型：</label>            <div>                <select class="chosen-select col-xs-5" name="type" data-placeholder="">                    <option value="1">普通奖品</option>                </select>            </div>        </div>    </div>--\x3e    <div class="row">        <div class="form-group">            <label class="col-xs-4" style="text-align: right;">概率：</label>            <div>            <input type="number"  name="rate"  class="col-xs-5" min="0.0001" step="0.0001" max="100" value="100" />%            </div>        </div>    </div>    <div class="space-4"></div>    <div class="row">        <div class="form-group">            <label class="col-xs-4" style="text-align: right;">剩余数量：</label>            <div>                <input type="number"  name="num"  class="col-xs-5" value="1" />            </div>        </div>    </div>',t='<div class="space-4"></div><div class="row"><div class="form-group"><label class="col-xs-4" style="text-align: right;">奖品图片：</label><div class="col-md-8" style="padding-left:0px;"><input type="file" class="imageuploader" name="imagepath"/><input type="hidden"  name="imageid" value="0"/></div></div>';function e(e){var a={id:0,prizename:"",activityid:ACTIVITYID,rate:100,type:1,imageid:0,num:1};e<=0?l(a):function(e){return i.ajax({url:"module.php?m=prize&c=admin&a=ajax_act_get_prize",type:"post",data:{id:e},dataType:"json"})}(e).done(function(e){0<e.code?l(e.data):(alert(e.message),l(a))}).fail(function(){alert("请检查您的网络，有可能是断网了哦。")}),i("#editformmodal").modal("show")}function l(e){i(".columnitems").html(""),i(a).appendTo(".columnitems"),i("input[name=id]").val(e.id),i("input[name=activityid]").val(e.activityid),i("input[name=prizename]").val(e.prizename),i("input[name=rate]").val(e.rate),i("select[name=type]").val(e.type),i("input[name=num]").val(e.leftnum),function(e){1==e.type&&function(e){i(t).appendTo(".columnitems"),i(".imageuploader").ace_file_input({style:"well",btn_choose:"点击此处选择图片",btn_change:null,no_icon:"ace-icon fa fa-cloud-upload",droppable:!0,maxSize:55e4,allowExt:["jpeg","jpg","png","gif"],allowMime:["image/jpg","image/jpeg","image/png","image/gif"],thumbnail:"large",previewHeight:200,preview_error:function(e,a){console.log(a)},before_remove:function(){return i("input[name=imageid]").val(0),!0}}).on("change",function(){i("input[name=imageid]").val(0)}).on("file.error.ace",function(e,a){}),0<e.id&&0<e.prizedata_arr.imageid&&(i("input[name=imageid]").val(e.prizedata_arr.imageid),i("input[name=imagepath]").ace_file_input("show_file_list",[{type:"image",name:"奖品图",path:e.formatedtext.text}]))}(e)}(e)}i(".btn_add").on("click",function(){e(0)}),i(".btn_edit").on("click",function(){e(i(this).attr("data"))}),i(".btn_save").on("click",function(){return i("#editform").ajaxSubmit({dataType:"json",success:function(e){0<e.code?window.location.reload():alert(e.message)}}),!1}),i(".btn_delete").on("click",function(){if(!confirm("确认要删除这个奖品吗？"))return!1;var e=i(this).attr("data");if(e<=0)return alert("数据错误"),!1;var a;(a=e,i.ajax({url:"module.php?m=prize&c=admin&a=ajax_act_delete_prize",data:{id:a},type:"get",dataType:"json"})).done(function(e){alert(e.message),0<e.code&&window.location.reload()}).fail(function(){alert("请检查您的网络，有可能是断网了哦。")})})});