!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).snabbt=t()}}(function(){return function o(a,s,u){function c(e,t){if(!s[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(f)return f(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[e]={exports:{}};a[e][0].call(r.exports,function(t){var n=a[e][1][t];return c(n||t)},r,r.exports,o,a,s,u)}return s[e].exports}for(var f="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,n,e){!function(t){if(!Array.prototype.find){function n(t){var n=Object(this),e=n.length<0?0:n.length>>>0;if(0!=e){if("function"!=typeof t||"[object Function]"!==Object.prototype.toString.call(t))throw new TypeError("Array#find: predicate must be a function");for(var i,r=arguments[1],o=0;o<e;o++)if(i=n[o],t.call(r,i,o,n))return i}}if(Object.defineProperty)try{Object.defineProperty(Array.prototype,"find",{value:n,configurable:!0,enumerable:!1,writable:!0})}catch(t){}Array.prototype.find||(Array.prototype.find=n)}}()},{}],2:[function(t,n,e){"use strict";var v=t("./utils.js"),g=t("./easing.js"),A=t("./tweeners"),c=t("./state.js");n.exports={createAnimation:function(t,n,r,o){var e=v.optionOrDefault(r.duration,500),i=v.optionOrDefault(r.delay,0),a=g.createEaser(v.optionOrDefault(r.easing,"linear"),r),s=0===e?n.clone():t.clone();s.transformOrigin=r.transformOrigin,s.perspective=r.perspective;var u=-1,c=0,f=!1,p=i/e,l=r.manual,h=0,d=void 0,m=void 0;return m=r.valueFeeder?A.createValueFeederTweener(r.valueFeeder,t,n,s):A.createStateTweener(t,n,s),{options:r,endState:function(){return n},finish:function(t){l=!1,u=c-e*h,d=t,a.resetFrom(h)},rollback:function(t){l=!1,m.setReverse(),u=c-e*(1-h),d=t,a.resetFrom(h)},tick:function(t){if(l)return c=t,this.updateCurrentTransform();if(-1===u&&(u=t),i<=t-u){!f&&r.start&&r.start(),f=!0,c=t-i;var n=Math.min(Math.max(0,c-u),e);a.tick(0===e?1:n/e),this.updateCurrentTransform(),r.update&&r.update(n/e),this.completed()&&d&&d()}},getCurrentState:function(){return s},setValue:function(t){f=!0,h=Math.min(Math.max(t,1e-4),.9999+p)},updateCurrentTransform:function(){var t=a.getValue();if(l){var n=Math.max(1e-5,h-p);t=a.isSpring?n:(a.tick(n,!0),a.getValue())}m.tween(t)},completed:function(){return 0!==u&&a.completed()},updateElement:function(t,n){if(f||n){var e=m.asMatrix(),i=m.getProperties();v.updateElementTransform(t,e,o,i.perspective,r.staticTransform),v.updateElementProperties(t,i)}}}},createAttentionAnimation:function(t){var n=t.movement;t.initialVelocity=.1,t.equilibriumPosition=0;var e=g.createSpringEasing(t),i=n.position,r=n.rotation,o=n.rotationPost,a=n.scale,s=n.skew,u=c.createState({position:i?[0,0,0]:void 0,rotation:r?[0,0,0]:void 0,rotationPost:o?[0,0,0]:void 0,scale:a?[1,1]:void 0,skew:s?[0,0]:void 0});return{options:function(){return t},tick:function(){e.equilibrium||(e.tick(),this.updateMovement())},updateMovement:function(){var t=e.getValue();i&&(u.position[0]=n.position[0]*t,u.position[1]=n.position[1]*t,u.position[2]=n.position[2]*t),r&&(u.rotation[0]=n.rotation[0]*t,u.rotation[1]=n.rotation[1]*t,u.rotation[2]=n.rotation[2]*t),o&&(u.rotationPost[0]=n.rotationPost[0]*t,u.rotationPost[1]=n.rotationPost[1]*t,u.rotationPost[2]=n.rotationPost[2]*t),a&&(u.scale[0]=1+n.scale[0]*t,u.scale[1]=1+n.scale[1]*t),s&&(u.skew[0]=n.skew[0]*t,u.skew[1]=n.skew[1]*t)},updateElement:function(t){v.updateElementTransform(t,u.asMatrix()),v.updateElementProperties(t,u.getProperties())},getCurrentState:function(){return u},completed:function(){return e.completed()}}}}},{"./easing.js":3,"./state.js":8,"./tweeners":9,"./utils.js":10}],3:[function(t,n,e){"use strict";var c=t("./utils.js");function a(t){var e=c.optionOrDefault(t.startPosition,0),i=c.optionOrDefault(t.equilibriumPosition,1),r=c.optionOrDefault(t.initialVelocity,0),o=c.optionOrDefault(t.springConstant,.8),a=c.optionOrDefault(t.springDeceleration,.9),s=c.optionOrDefault(t.springMass,10),u=!1;return{isSpring:!0,tick:function(t,n){0===t||n||u||(e+=r+=-(e-i)*o/s,r*=a,Math.abs(e-i)<.001&&Math.abs(r)<.001&&(u=!0))},resetFrom:function(t){e=t,r=0},getValue:function(){return u?i:e},completed:function(){return u}}}var s={linear:function(t){return t},ease:function(t){return(Math.cos(t*Math.PI+Math.PI)+1)/2},easeIn:function(t){return t*t},easeOut:function(t){return 1-Math.pow(t-1,2)}};n.exports={createEaser:function(t,n){if("spring"===t)return a(n);var e=t;c.isFunction(t)||(e=s[t]);var i,r=e,o=0;return{tick:function(t){o=r(t),i=t},resetFrom:function(){i=0},getValue:function(){return o},completed:function(){return 1<=i&&i}}},createSpringEasing:a}},{"./utils.js":10}],4:[function(t,n,e){"use strict";var a=t("./state.js").stateFromOptions,s=t("./animation.js"),i=t("./state.js").createState,r=t("./utils.js"),o={runningAnimations:[],completedAnimations:[],transformProperty:"transform",rAFScheduled:!1,init:function(){},scheduleNextFrame:function(){var n=this;this.rAFScheduled||(this.rAFScheduled=!0,window.requestAnimationFrame(function(t){n.rAFScheduled=!1,n.stepAnimations(t)}))},stepAnimations:function(i){var r=this;this.runningAnimations.forEach(function(t){var n=t[0],e=t[1];r.stepAnimation(n,e,i)}),this.archiveCompletedAnimations(),0<this.runningAnimations.length&&this.scheduleNextFrame()},stepAnimation:function(t,n,e){n.tick(e),n.updateElement(t)},archiveCompletedAnimations:function(){var t=this.runningAnimations.filter(function(t){return!t[1].completed()}),n=this.runningAnimations.filter(function(t){return t[1].completed()}),e=this.createQueuedAnimations(n),i=n.filter(function(n){return!e.find(function(t){return t[0]!==n[0]})});o.runningAnimations=t,this.completedAnimations=this.completedAnimations.filter(function(n){return!i.find(function(t){return t[0]===n[0]})}),Array.prototype.push.apply(this.completedAnimations,i),Array.prototype.push.apply(this.runningAnimations,e),n.forEach(function(t){var n=t[1].options.complete;n&&n()}),this.clearOphanedEndStates()},createQueuedAnimations:function(t){var r=this;return t.filter(function(t){var n=t[2];return n.index<n.queue.length}).map(function(t){var n=t[0],e=t[2],i=e.queue[e.index];return e.index++,[t[0],r.createAnimation(n,i,t[1].endState()),e]})},createChainer:function(){var n={index:0,queue:[],snabbt:function(t){return this.queue.push(t),n}};return n},createAnimation:function(n,t,e){var i=e||this.findCurrentState(n),r=a(t,i,!0),o=a(t,i,!1);return this.runningAnimations=this.runningAnimations.filter(function(t){return n!==t[0]}),s.createAnimation(r,o,t,this.transformProperty)},createAttentionAnimation:function(t,n){var e=a(n,i({},!1));return n.movement=e,s.createAttentionAnimation(n)},stopAnimation:function(n){var t=this.runningAnimations.filter(function(t){return t[0]===n});this.runningAnimations=this.runningAnimations.filter(function(t){return t[0]!==n}),Array.prototype.push.apply(this.completedAnimations,t)},initializeAnimation:function(t,n,e){var i=void 0;if("attention"===n)i=this.createAttentionAnimation(t,e);else{if("stop"===n)return this.stopAnimation(t);i=this.createAnimation(t,n)}var r=this.createChainer();return i.updateElement(t,!0),this.runningAnimations.push([t,i,r]),this.scheduleNextFrame(),n.manual?i:r},findCurrentState:function(n){var t=this.runningAnimations.find(function(t){return n===t[0]});return t?t[1].getCurrentState():(t=this.completedAnimations.find(function(t){return n===t[0]}))?t[1].getCurrentState():void 0},clearOphanedEndStates:function(){this.completedAnimations=this.completedAnimations.filter(function(t){return r.findUltimateAncestor(t[0]).body})}};n.exports=o},{"./animation.js":2,"./state.js":8,"./utils.js":10}],5:[function(t,n,e){"use strict";t("array.prototype.find");var s=t("./engine.js"),u=t("./properties.js").preprocessOptions,c=t("./utils.js"),i=t("./matrix.js"),r=t("./utils.js").updateElementTransform;function a(t,n,e){if(!t.length)return"string"==typeof n?s.initializeAnimation(t,n,u(e,0,1)):s.initializeAnimation(t,u(n,0,1),e);for(var r=[],o={snabbt:function(e){var i=r.length;return r.forEach(function(t,n){t.snabbt(u(e,n,i))}),o},setValue:function(n){return r.forEach(function(t){t.setValue(n)}),o},finish:function(e){return r.forEach(function(t,n){if(c.isFunction(e))return t.finish(function(){e(n,r.length)});t.finish()}),o},rollback:function(e){return r.forEach(function(t,n){if(c.isFunction(e))return t.rollback(function(){e(n,r.length)});t.rollback()}),o}},i=0,a=t.length;i<a;++i)"string"==typeof n?r.push(s.initializeAnimation(t[i],n,u(e,i,a))):r.push(s.initializeAnimation(t[i],u(n,i,a),e));return o}n.exports=function(t,n,e){return a(t,n,e)},n.exports.createMatrix=i,n.exports.setElementTransform=r,n.exports.sequence=function(r){var o=-1;!function t(){if(!(++o>r.length-1)){var n=r[o][0],e=r[o][1],i=e.allDone;e.allDone=i?function(){i(),t()}:t,a(n,e)}}()},"undefined"!=typeof window&&window.jQuery&&(window.jQuery.fn.snabbt=function(t,n){return a(this.get(),t,n)}),s.init()},{"./engine.js":4,"./matrix.js":6,"./properties.js":7,"./utils.js":10,"array.prototype.find":1}],6:[function(t,n,e){"use strict";function a(t,n,e){return e[0]=t[0]*n[0]+t[1]*n[4]+t[2]*n[8]+t[3]*n[12],e[1]=t[0]*n[1]+t[1]*n[5]+t[2]*n[9]+t[3]*n[13],e[2]=t[0]*n[2]+t[1]*n[6]+t[2]*n[10]+t[3]*n[14],e[3]=t[0]*n[3]+t[1]*n[7]+t[2]*n[11]+t[3]*n[15],e[4]=t[4]*n[0]+t[5]*n[4]+t[6]*n[8]+t[7]*n[12],e[5]=t[4]*n[1]+t[5]*n[5]+t[6]*n[9]+t[7]*n[13],e[6]=t[4]*n[2]+t[5]*n[6]+t[6]*n[10]+t[7]*n[14],e[7]=t[4]*n[3]+t[5]*n[7]+t[6]*n[11]+t[7]*n[15],e[8]=t[8]*n[0]+t[9]*n[4]+t[10]*n[8]+t[11]*n[12],e[9]=t[8]*n[1]+t[9]*n[5]+t[10]*n[9]+t[11]*n[13],e[10]=t[8]*n[2]+t[9]*n[6]+t[10]*n[10]+t[11]*n[14],e[11]=t[8]*n[3]+t[9]*n[7]+t[10]*n[11]+t[11]*n[15],e[12]=t[12]*n[0]+t[13]*n[4]+t[14]*n[8]+t[15]*n[12],e[13]=t[12]*n[1]+t[13]*n[5]+t[14]*n[9]+t[15]*n[13],e[14]=t[12]*n[2]+t[13]*n[6]+t[14]*n[10]+t[15]*n[14],e[15]=t[12]*n[3]+t[13]*n[7]+t[14]*n[11]+t[15]*n[15],e}function s(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}function u(t,n){n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]}n.exports=function(){var i=new Float32Array(16),r=new Float32Array(16),o=new Float32Array(16);return s(i),{data:i,asCSS:function(){for(var t="matrix3d(",n=0;n<15;++n)Math.abs(i[n])<1e-4?t+="0,":t+=i[n].toFixed(10)+",";return Math.abs(i[15])<1e-4?t+="0)":t+=i[15].toFixed(10)+")",t},clear:function(){s(i)},translate:function(t,n,e){return u(i,r),function(t,n,e,i){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n,t[13]=e,t[14]=i,t[15]=1}(o,t,n,e),a(r,o,i),this},rotateX:function(t){return u(i,r),function(t,n){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=Math.cos(n),t[6]=-Math.sin(n),t[7]=0,t[8]=0,t[9]=Math.sin(n),t[10]=Math.cos(n),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(o,t),a(r,o,i),this},rotateY:function(t){return u(i,r),function(t,n){t[0]=Math.cos(n),t[1]=0,t[2]=Math.sin(n),t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=-Math.sin(n),t[9]=0,t[10]=Math.cos(n),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(o,t),a(r,o,i),this},rotateZ:function(t){return u(i,r),function(t,n){t[0]=Math.cos(n),t[1]=-Math.sin(n),t[2]=0,t[3]=0,t[4]=Math.sin(n),t[5]=Math.cos(n),t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(o,t),a(r,o,i),this},scale:function(t,n){return u(i,r),function(t,n,e){t[0]=n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(o,t,n),a(r,o,i),this},skew:function(t,n){return u(i,r),function(t,n,e){t[0]=1,t[1]=Math.tan(n),t[2]=0,t[3]=0,t[4]=Math.tan(e),t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(o,t,n),a(r,o,i),this}}}},{}],7:[function(t,n,e){"use strict";var a=t("./utils.js");function s(t){return"from"+t.charAt(0).toUpperCase()+t.slice(1)}var u={position:[3,[0,0,0]],rotation:[3,[0,0,0]],rotationPost:[3,[0,0,0]],skew:[2,[0,0]],scale:[2,[1,1]],scalePost:[2,[1,1]],opacity:[1],width:[1],height:[1]};n.exports={tweenableProperties:u,fromPrefixed:s,preprocessOptions:function(e,i,r){if(!e)return e;var o=a.cloneObject(e),t=a.isFunction(e.allDone),n=a.isFunction(e.complete);return(n||t)&&(o.complete=function(){n&&e.complete.call(this,i,r),t&&i===r-1&&e.allDone()}),a.isFunction(e.valueFeeder)&&(o.valueFeeder=function(t,n){return e.valueFeeder(t,n,i,r)}),a.isFunction(e.easing)&&(o.easing=function(t){return e.easing(t,i,r)}),a.isFunction(e.start)&&(o.start=function(){return e.start(i,r)}),a.isFunction(e.update)&&(o.update=function(t){return e.update(t,i,r)}),Object.keys(u).concat(["perspective","transformOrigin","duration","delay"]).forEach(function(t){var n=s(t);a.isFunction(e[t])&&(o[t]=e[t](i,r)),a.isFunction(e[n])&&(o[n]=e[n](i,r))}),o},types:{SCALAR:1,ARRAY_2:2,ARRAY_3:3}}},{"./utils.js":10}],8:[function(t,n,e){"use strict";var o=t("./matrix.js"),a=t("./properties.js").tweenableProperties,s=t("./properties.js").fromPrefixed,u=t("./properties.js").types,c=t("./utils.js");function f(n,e){var i=o(),t={opacity:void 0,width:void 0,height:void 0,perspective:void 0},r={clone:function(){var e=this,i={};return Object.keys(a).forEach(function(t){var n=a[t][0];e[t]&&(i[t]=n===u.SCALAR?e[t]:e[t].slice(0))}),f(i)},asMatrix:function(){var t=i;return t.clear(),this.transformOrigin&&t.translate(-this.transformOrigin[0],-this.transformOrigin[1],-this.transformOrigin[2]),this.scale&&t.scale(this.scale[0],this.scale[1]),this.skew&&t.skew(this.skew[0],this.skew[1]),this.rotation&&(t.rotateX(this.rotation[0]),t.rotateY(this.rotation[1]),t.rotateZ(this.rotation[2])),this.position&&t.translate(this.position[0],this.position[1],this.position[2]),this.rotationPost&&(t.rotateX(this.rotationPost[0]),t.rotateY(this.rotationPost[1]),t.rotateZ(this.rotationPost[2])),this.scalePost&&t.scale(this.scalePost[0],this.scalePost[1]),this.transformOrigin&&t.translate(this.transformOrigin[0],this.transformOrigin[1],this.transformOrigin[2]),t},getProperties:function(){return t.opacity=this.opacity,t.width=this.width+"px",t.height=this.height+"px",t.perspective=this.perspective,t}};return Object.keys(a).forEach(function(t){r[t]=e?c.optionOrDefault(n[t],a[t][1]):n[t]}),r}n.exports={createState:f,stateFromOptions:function(n,t,e){var i=t&&t.clone()||f({},!0),r=e?s:function(t){return t};return Object.keys(a).forEach(function(t){i[t]=c.optionOrDefault(n[r(t)],i[t]),i[t]&&i[t].slice&&(i[t]=i[t].slice())}),i}}},{"./matrix.js":6,"./properties.js":7,"./utils.js":10}],9:[function(t,n,e){"use strict";var i=t("./matrix.js"),s=t("./properties").tweenableProperties,u=t("./properties").types;n.exports={createStateTweener:function(t,n,e){var i=t,r=n,o=e,a=[];return Object.keys(s).forEach(function(t){void 0!==n[t]&&a.push(t)}),{tween:function(e){a.forEach(function(t){var n=s[t][0];n===u.ARRAY_3?function(t,n,e,i,r){var o=n[i][0]-t[i][0],a=n[i][1]-t[i][1],s=n[i][2]-t[i][2];e[i][0]=t[i][0]+r*o,e[i][1]=t[i][1]+r*a,e[i][2]=t[i][2]+r*s}(i,r,o,t,e):n===u.ARRAY_2?function(t,n,e,i,r){var o=n[i][0]-t[i][0],a=n[i][1]-t[i][1];e[i][0]=t[i][0]+r*o,e[i][1]=t[i][1]+r*a}(i,r,o,t,e):function(t,n,e,i,r){var o=n[i]-t[i];e[i]=t[i]+r*o}(i,r,o,t,e)})},asMatrix:function(){return o.asMatrix()},getProperties:function(){return o.getProperties()},result:function(){return o},setReverse:function(){var t=i;i=r,r=t}}},createValueFeederTweener:function(r,t,n,e){var o=r(0,i()),a=t,s=n,u=e,c=!1;return{tween:function(t){c&&(t=1-t),o.clear(),o=r(t,o);var n=s.width-a.width,e=s.height-a.height,i=s.opacity-a.opacity;void 0!==s.width&&(u.width=a.width+t*n),void 0!==s.height&&(u.height=a.height+t*e),void 0!==s.opacity&&(u.opacity=a.opacity+t*i)},asMatrix:function(){return o},getProperties:function(){return u.getProperties()},setReverse:function(){c=!0}}}}},{"./matrix.js":6,"./properties":7}],10:[function(t,n,e){"use strict";n.exports={optionOrDefault:function(t,n){return void 0===t?n:t},updateElementTransform:function(t,n,e,i,r){var o=i?"perspective("+i+"px) ":"",a=n.asCSS(),s=r||"";e?t.style[e]=s+o+a:t.style.transform=s+o+a},updateElementProperties:function(t,n){for(var e in n)"perspective"!==e&&(t.style[e]=n[e])},isFunction:function(t){return"function"==typeof t},cloneObject:function(t){if(!t)return t;var n={};for(var e in t)n[e]=t[e];return n},findUltimateAncestor:function(t){for(var n=t;n.parentNode;)n=n.parentNode;return n}}},{}]},{},[5])(5)});